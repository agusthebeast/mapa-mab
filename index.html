<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Provincia de Buenos Aires</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <img src="iconos/logo-congreso.jpeg" alt="Congreso de la Libertad Bonaerense" class="logo-congreso">

  <h1>Mapa Del Abandono Bonaerense (MAB)</h1>
  <h2>
    El mapa interactivo de la Provincia Abandonada. <br> Naveg√° por el abandono mediante im√°genes reales de escuelas, hospitales, rutas y calles de la provincia de Buenos Aires.
  </h2>
  <h2>
  Cada punto en este mapa es una historia trunca.  Es lo que no quieren que veas. <br> Cada foto es un recurso desviado, es la ineficiencia del Estado en su m√°xima expresi√≥n.
</h2>

  <div class="buscador-wrapper">
  <input type="text" id="buscador-distrito" placeholder="Buscar un distrito..." list="distritos" />
  <button id="boton-buscar">Buscar</button>
  <datalist id="distritos">
    <option value="Lan√∫s">
    <option value="San Vicente">
    <option value="La Plata">
    <option value="Mor√≥n">
  </datalist>
  </div>

  <div id="contador-imagenes">üì∏ Cargando cantidad de evidencias...</div>

  <div id="mapa-container">
    <div id="zoom-wrapper"></div>

    <div id="zoom-buttons">
      <button id="zoom-in">Ôºã</button>
      <button id="zoom-out">Ôºç</button>
    </div>
  </div>

  <!-- Bot√≥n para abrir el formulario -->
<button onclick="abrirFormularioCarga()">üì§ Cargar imagen</button>

<!-- Formulario oculto -->
<div id="formulario-carga" style="display:none; padding: 1rem; border: 1px solid #ccc;">
  <h3>Cargar imagen al mapa</h3>
  <label>Distrito:
    <select id="distrito-select">
      <option value="">Seleccion√° un distrito</option>
      <option value="Lan√∫s">Lan√∫s</option>
      <option value="La Matanza">La Matanza</option>
      <!-- Agreg√° todos los distritos -->
    </select>
  </label><br>

  <label>Categor√≠a:
    <select id="categoria-select">
      <option value="">Seleccion√° una categor√≠a</option>
      <option value="Salud">Salud</option>
      <option value="Educaci√≥n">Educaci√≥n</option>
      <option value="Seguridad">Seguridad</option>
      <option value="Infraestructura">Infraestructura</option>
    </select>
  </label><br>

  <label>Imagen:
    <input type="file" id="imagen-input" accept="image/*" />
  </label><br><br>

  <button onclick="subirImagen()">Enviar imagen</button>
</div>

<script>
function abrirFormularioCarga() {
  document.getElementById("formulario-carga").style.display = 'block';
}

async function subirImagen() {
  const distrito = document.getElementById("distrito-select").value;
  const categoria = document.getElementById("categoria-select").value;
  const file = document.getElementById("imagen-input").files[0];

  if (!distrito || !categoria || !file) {
    alert("Por favor complet√° todos los campos.");
    return;
  }

  const formData = new FormData();
  formData.append("file", file);
  formData.append("upload_preset", "pendientes_mapa"); // nombre del preset que creaste
  formData.append("folder", `pendientes/${distrito}/${categoria}`);

  const res = await fetch("https://api.cloudinary.com/v1_1/dq9qdmgjr/image/upload", {
    method: "POST",
    body: formData
  });

  const data = await res.json();
  if (data.secure_url) {
    alert("Imagen enviada correctamente. Ser√° revisada antes de publicarse.");
  } else {
    alert("Error al subir imagen.");
  }
}
</script>


  <div id="tooltip"></div>

  <script src="script.js"></script>

  <div class="mensaje-cierre">
    <p>
      Es momento de cambiarlo todo. De construir la provincia desde sus cimientos, la provincia que verdaderamente so√±amos y nos merecemos los bonaerenses. Escuelas dignas, calles transitables, salud real y seguridad verdadera.
    </p>
  </div>

  <footer>
    <div class="footer-content">
      <div class="footer-logos">
        <img src="iconos/logo3.png" alt="Logo 3">
      </div>
      <p> </p>
    </div>
  </footer>

</body>
</html>